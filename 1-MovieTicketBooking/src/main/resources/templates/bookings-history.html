<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>Booking History | TicketNest</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">
</head>
<body class="bg-light">
	<div th:replace="~{fragments/header :: header}"></div>

	<div class="container mt-4">
		<h3 class="fw-bold mb-3">Booking History</h3>

		<div th:if="${#lists.isEmpty(bookings)}" class="alert alert-secondary">
			No past bookings yet.</div>

		<div th:if="${!#lists.isEmpty(bookings)}" class="table-responsive">
			<table class="table table-hover align-middle">
				<thead class="table-light">
					<tr>
						<th>Booking #</th>
						<th>Booking Date</th>
						<th>Status</th>
						<th>Payment</th>
						<th>Total</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="b : ${bookings}">
						<td th:text="${b.bookingId}">1001</td>
						<td th:text="${#temporals.format(b.bookingDate, 'dd MMM yyyy')}">12
							Jan 2026</td>
						<td><span class="badge"
							th:classappend="${'CANCELLED'.equalsIgnoreCase(b.bookingStatus)} ? ' bg-secondary' :
                                 ${'FAILED'.equalsIgnoreCase(b.paymentStatus)} ? ' bg-danger' : ' bg-success'"
							th:text="${b.bookingStatus}">CANCELLED</span></td>
						<td th:text="${b.paymentStatus}">PAID</td>
						<td
							th:text="${#numbers.formatDecimal(b.totalAmount, 1, 'POINT', 2, 'NONE')}">450.00</td>
						<td><a th:href="@{/success/{id}(id=${b.bookingId})}"
							class="btn btn-sm btn-outline-primary"> View Ticket </a></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>

	<div th:replace="~{fragments/footer :: footer}"></div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<link
		href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
		rel="stylesheet">
</body>
</html>
``
