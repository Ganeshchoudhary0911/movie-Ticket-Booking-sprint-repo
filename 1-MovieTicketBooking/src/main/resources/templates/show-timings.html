<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title th:text="${movie.movieName} + ' | Show Timings'">Show
	Timings</title>

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">

<style>
body {
	background: #f5f6f8;
}

/* --- MOVIE HEADER (Poster + Info) --- */
.movie-header-box {
	background: white;
	padding: 20px;
	border-radius: 14px;
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
	display: flex;
	gap: 15px;
	align-items: center;
	margin-bottom: 25px;
}

.movie-header-box img {
	width: 75px;
	height: 75px;
	border-radius: 6px;
	object-fit: cover;
}

.movie-header-box h3 {
	margin: 0;
	font-weight: 700;
	font-size: 1.55rem;
}

/* --- THEATRE CARD --- */
.theatre-card-box {
	background: white;
	padding: 20px;
	border-radius: 14px;
	box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
	margin-bottom: 20px;
}

.theatre-card-box h5 {
	font-weight: 700;
	margin-bottom: 6px;
}

/* --- Feature icons text --- */
.feature-text {
	font-size: 0.85rem;
	color: #6a6a6a;
	margin-bottom: 10px;
}

.feature-text span {
	margin-right: 10px;
	font-weight: 500;
}

/* --- Show-time button pill --- */
.show-pill {
	padding: 6px 20px;
	border-radius: 10px;
	border: 1.5px solid #28a745;
	color: #28a745;
	font-weight: 600;
	background: #e8fff0;
	transition: 0.2s ease;
	text-decoration: none;
}

.show-pill:hover {
	background: #28a745;
	color: white;
}

/* Date selector UI */
.date-pill {
	padding: 10px 18px;
	border-radius: 50px;
	text-align: center;
	min-width: 85px;
	border: 1px solid #dcdcdc;
	background: white;
}

.date-pill-active {
	background: black;
	color: white;
	border-color: black !important;
}
</style>
</head>

<body class="bg-body-tertiary">

	<div class="container-lg py-4">

		<!-- ⭐ MOVIE HEADER WITH POSTER -->
		<div class="movie-header-box">

			<img th:src="${movie.posterUrl} ?: @{/images/placeholder-poster.png}"
				alt="Poster">

			<div>
				<h3 th:text="${movie.movieName}">Movie Name</h3>

				<div class="d-flex align-items-center gap-2 mt-1">
					<span class="badge bg-light text-dark border"
						th:text="${movie.language}"> Telugu </span> <span
						class="text-body-secondary small"
						th:text="${movie.duration + ' mins'}"> 120 mins </span>
				</div>
			</div>

		</div>


		<!-- ⭐ DATE SELECTOR -->
		<div
			class="d-flex gap-2 mb-4 overflow-auto pb-2 sticky-top bg-body-tertiary pt-1">

			<a th:each="d : ${dates}"
				th:href="@{/shows/{id}(id=${movie.movieId}, date=${d})}"
				class="text-decoration-none">

				<div class="date-pill"
					th:classappend="${d.equals(selectedDate)} ? ' date-pill-active' : ''">

					<small class="fw-semibold text-uppercase"
						th:text="${#temporals.format(d,'EEE')}">Wed</small><br> <strong
						class="fs-6" th:text="${#temporals.format(d,'dd MMM')}">11
						Feb</strong>
				</div>

			</a>
		</div>


		<!-- ⭐ NO SHOWS MESSAGE -->
		<div th:if="${#maps.isEmpty(groupedShows)}"
			class="text-center text-body-secondary py-5 fs-5">No shows
			available for this date</div>


		<!-- ⭐ THEATRE LIST -->
		<div th:each="entry : ${groupedShows}" class="theatre-card-box">

			<!-- Theatre name -->
			<h5 th:text="${entry.value[0].theatreName}">Theatre Name</h5>

			<!-- Feature text -->
			<div class="feature-text">
				<span class="text-success">● M‑Ticket</span> <span
					class="text-warning">● Food &amp; Beverage</span>
			</div>

			<div class="text-body-secondary small mb-3">Non-cancellable</div>

			<!-- Show-time pills -->
			<div class="d-flex gap-2 flex-wrap">

				<a th:each="show : ${entry.value}"
					th:href="@{/seats/{id}(id=${show.showId})}" class="show-pill">

					<span th:text="${#temporals.format(show.showTime, 'hh:mm a')}">10:30
						AM</span>

				</a>

			</div>

		</div>

	</div>

</body>
</html>
